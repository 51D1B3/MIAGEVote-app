<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Générateur d'icônes PWA</title>
</head>
<body>
  <h2>Générateur d'icônes pour SidiVote</h2>
  <input type="file" id="upload" accept="image/*">
  <canvas id="canvas" style="display:none;"></canvas>
  <div id="downloads"></div>
  
  <script>
    document.getElementById('upload').addEventListener('change', function(e) {
      const file = e.target.files[0];
      const img = new Image();
      const reader = new FileReader();
      
      reader.onload = function(event) {
        img.src = event.target.result;
        img.onload = function() {
          const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
          const downloads = document.getElementById('downloads');
          downloads.innerHTML = '';
          
          sizes.forEach(size => {
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0, size, size);
            
            canvas.toBlob(blob => {
              const url = URL.createObjectURL(blob);
              const a = document.createElement('a');
              a.href = url;
              a.download = `icon-${size}x${size}.png`;
              a.textContent = `Télécharger ${size}x${size}`;
              a.style.display = 'block';
              a.style.margin = '5px';
              downloads.appendChild(a);
            });
          });
        };
      };
      reader.readAsDataURL(file);
    });
  </script>
</body>
</html>
